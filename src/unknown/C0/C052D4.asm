
UNKNOWN_C052D4: ;$C052D4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 42
	STA $28
	LDA #$00FF
	STA $26
	STA .LOWORD(GAME_STATE) + game_state::unknown88
	LDA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	STA $24
	LDA .LOWORD(GAME_STATE)+game_state::leader_y_coord
	STA $22
	LDA .LOWORD(GAME_STATE)+game_state::trodden_tile_type
	STA $04
	STA $20
	LDA .LOWORD(GAME_STATE)+game_state::walking_style
	STA $1E
	LDA $28
	INC
	INC
	INC
	INC
	AND #$0007
	STA $02
	LDY #.LOWORD(GAME_STATE) + game_state::unknown80
	STY $1C
	MOVE_INT_YPTRSRC a:.LOWORD(RAM), $06
	MOVE_INT $06, $0E
	LDX $04
	LDA $02
	JSR a:.LOWORD(ADJUST_POSITION_HORIZONTAL)
	LDY $1C
	MOVE_INT_YPTRSRC a:.LOWORD(RAM), $0A
	SEC
	SUB_INT_ASSIGN $06, $0A
	MOVE_INT $06, $12
	LDY #.LOWORD(GAME_STATE) + game_state::unknown84
	STY $1C
	MOVE_INT_YPTRSRC a:.LOWORD(RAM), $06
	MOVE_INT $06, $0E
	LDX $04
	LDA $02
	JSR a:.LOWORD(ADJUST_POSITION_VERTICAL)
	LDY $1C
	MOVE_INT_YPTRSRC a:.LOWORD(RAM), $0A
	SEC
	SUB_INT_ASSIGN $06, $0A
	MOVE_INT $06, $16
	LDX #$0100
	BRA @UNKNOWN1
@UNKNOWN0:
	TXA
	DEC
	STA $1C
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	CLC
	ADC #.LOWORD(PLAYER_POSITION_BUFFER)
	TAX
	LDA $24
	STA a:.LOWORD(RAM),X
	LDA $22
	STA a:.LOWORD(RAM)+2,X
	LDA $20
	STA $04
	STA a:.LOWORD(RAM)+4,X
	LDA $1E
	STA a:.LOWORD(RAM)+6,X
	LDA $28
	STA a:.LOWORD(RAM)+8,X
	STZ a:.LOWORD(RAM)+10,X
	LDA $24
	CLC
	ADC $14
	STA $24
	LDA $22
	CLC
	ADC $18
	STA $22
	LDA $1C
	TAX
@UNKNOWN1:
	BNE @UNKNOWN0
	LDA $26
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	CLC
	ADC #.LOWORD(PLAYER_POSITION_BUFFER)
	TAX
	STX $1C
	LDA #$0000
	STA $1A
	BRA @UNKNOWN3
@UNKNOWN2:
	TAX
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_members,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	TAY
	LDA $26
	STA a:.LOWORD(RAM)+char_struct::position_index,Y
	LDA #$FFFF
	STA a:.LOWORD(RAM)+char_struct::unknown63 + 2,Y
	STA a:.LOWORD(RAM)+char_struct::unknown53 + 2,Y
	LDA $1A
	ASL
	STA $02
	CLC
	ADC #.LOWORD(GAME_STATE) + game_state::unknownA2
	TAY
	LDA a:.LOWORD(RAM),Y
	ASL
	PHA
	LDX $1C
	LDA a:.LOWORD(RAM),X
	PLX
	STA .LOWORD(ENTITY_ABS_X_TABLE),X
	LDA a:.LOWORD(RAM),Y
	ASL
	PHA
	LDX $1C
	LDA a:.LOWORD(RAM)+2,X
	PLX
	STA .LOWORD(ENTITY_ABS_Y_TABLE),X
	LDX $1C
	LDA a:.LOWORD(RAM)+8,X
	LDX $02
	STA .LOWORD(ENTITY_DIRECTIONS),X
	LDX $1C
	LDA a:.LOWORD(RAM)+4,X
	LDX $02
	STA .LOWORD(UNKNOWN_30X2_TABLE_37),X
	LDA $26
	SEC
	SBC #$0010
	STA $26
	LDX $1C
	TXA
	SEC
	SBC #$00C0
	TAX
	STX $1C
	LDA $1A
	INC
	STA $1A
@UNKNOWN3:
	LDA .LOWORD(GAME_STATE)+game_state::party_count
	AND #$00FF
	STA $02
	LDA $1A
	CMP $02
	BCS @UNKNOWN4
	BEQ @UNKNOWN4
	JMP a:.LOWORD(@UNKNOWN2)
@UNKNOWN4:
	PLD
	RTL
