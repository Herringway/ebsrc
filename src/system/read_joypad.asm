
READ_JOYPAD:
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8
	LDA <DEMO_RECORDING_FLAGS + 0
	BEQ @UNKNOWN1
	AND #$4000
	BEQ @UNKNOWN1
	DEC <DEMO_FRAMES_LEFT
	BNE @UNKNOWN2
	INC <DEMO_READ_SOURCE
	INC <DEMO_READ_SOURCE
	INC <DEMO_READ_SOURCE
	LDA [<DEMO_READ_SOURCE]
	AND #$00FF
	BEQ @UNKNOWN0
	STA <DEMO_FRAMES_LEFT
	LDY #$0001
	LDA [<DEMO_READ_SOURCE],Y
	STA <PAD_RAW
	STA <PAD_RAW + 2
	BRA @UNKNOWN2
@UNKNOWN0:
	LDA <DEMO_RECORDING_FLAGS + 0
	AND #$FFFF ^ DEMO_RECORDING_FLAG::PLAYBACK
	STA <DEMO_RECORDING_FLAGS
@UNKNOWN1:
	LDA JOYPAD_2_DATA
	STA <PAD_RAW + 2
	LDA JOYPAD_1_DATA
	STA <PAD_RAW
@UNKNOWN2:
	RTS
