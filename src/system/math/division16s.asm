
;A = int16 divisor, Y = int16 dividend
DIVISION16S:
	.A16
	PHA
	TYA
	BPL @DIVIDEND_POSITIVE
	EOR #$FFFF
	INC
	TAY
@DIVIDEND_POSITIVE:
	PLA
	BPL DIVISION16S_DIVISOR_POSITIVE
	EOR #$FFFF
	INC
DIVISION16S_DIVISOR_POSITIVE:
	STA DIV_MULT_TMP
	STY DIV_MULT_TMP2
	LDA #$0000
	LDY #$0010
@LOOP_BEGIN:
	ROL DIV_MULT_TMP
	ROL
	CMP DIV_MULT_TMP2
	BCC @OVERFLOW
	SBC DIV_MULT_TMP2
@OVERFLOW:
	DEY
	BNE @LOOP_BEGIN
	TAY
	LDA DIV_MULT_TMP
	ROL
	RTL
