
DO_BATTLEBG_DMA:
	PHY
	TAY
	LDA f:DMA_TARGET_REGISTERS,X
	PHA
	TYA
	ASL
	ASL
	ASL
	ASL
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA #^__BSS_START__
	STA f:A1B0,X
	STA f:DASB0,X
	PLA
	STA f:BBAD0,X
	PLA
	LDA #$42
	STA f:DMAP0,X
	REP #PROC_FLAGS::ACCUM8
	PLA
	PHX
	BNE @UNKNOWN1
	LDX #$0006
@UNKNOWN0:
	LDA f:UNKNOWN_C0AE26,X
	STA ANIMATED_BACKGROUND_LAYER_1_HDMA_TABLE,X
	DEX
	DEX
	BPL @UNKNOWN0
	LDA #.LOWORD(ANIMATED_BACKGROUND_LAYER_1_HDMA_TABLE)
	BRA @UNKNOWN3
@UNKNOWN1:
	LDX #6
@UNKNOWN2:
	LDA f:UNKNOWN_C0AE2D,X
	STA ANIMATED_BACKGROUND_LAYER_2_HDMA_TABLE,X
	DEX
	DEX
	BPL @UNKNOWN2
	LDA #.LOWORD(ANIMATED_BACKGROUND_LAYER_2_HDMA_TABLE)
@UNKNOWN3:
	PLX
	STA f:A1T0L,X
	SEP #PROC_FLAGS::ACCUM8
	TYX
	LDA HDMAEN_MIRROR
	ORA f:DMA_FLAGS,X
	STA HDMAEN_MIRROR
	REP #PROC_FLAGS::ACCUM8
	RTL
